---
title: Code Review 的一些原则
date: 2018/9/12 10:25:00
tags:
- 思考
categories: 思考
---

### 架构/设计/常规
------
1. 单一职责原则

   一个类只能干一个事情，一个方法最好也只干一件事情。比较常见的违背是一个类既干UI的事情，又干逻辑的事情，这个在低质量的客户端代码里很常见。<!-- more -->

2. 行为是否统一
   * 缓存是否统一
   * 错误处理是否统一
   * 错误提示是否统一
   * 弹出框是否统一
   * ……

3. 代码污染

   代码有没有对其他模块强耦合

4. 重复代码

   应该抽取重复代码

5. 开闭原则

6. 面向接口编程

7. 健壮性
   * 是否考虑线程安全
   * 数据访问是否一致性
   * 边界处理是否完整
   * 逻辑是否健壮
   * 是否有内存泄漏
   * 有没有循环依赖
   * 有没有野指针
   * 是否检查了数组的“越界“错误
   * ……

8. 错误处理

9. 改动是不是对代码的提升

   新的改动是打补丁，让代码质量继续恶化，还是对代码质量做了修复

10. 效率/性能
   * 关键算法的时间复杂度多少？有没有可能有潜在的性能瓶颈
   * 客户端程序对频繁消息和较大数据等耗时操作是否处理得当

### 代码风格
------
1. 可读性

   衡量可读性的可以有很好实践的标准，就是 Reviewer 能否非常容易的理解这个代码。如果不是，那意味着代码的可读性要进行改进

2. 命名
   * 命名对可读性非常重要
   * 是否跟系统属性命名造成冲突
   * 英语用词尽量准确一点，必要时可以查字典

3. 函数长度/类长度
   * 函数太长的不好阅读
   * 类太长了，检查是否违反的 单一职责 原则

4. 注释

   恰到好处的注释,不是注释越多越好

5. 参数个数

   不要太多，一般不要超过 3 个